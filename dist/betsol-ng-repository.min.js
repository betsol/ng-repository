/**
 * betsol-ng-repository - Repository constructor for Angular.js
 * @version v0.0.0
 * @link https://github.com/betsol/ng-repository
 * @license MIT
 *
 * @author Slava Fomin II <s.fomin@betsol.ru>
 */
!function(n,e){"use strict";function t(n){return"/"!=n.substr(-1,1)&&(n+="/"),n}function r(n,e){return n+e}function u(n){var t=[];return e.forEach(n,function(n,e){t.push(("asc"==n?"+":"-")+e)}),t.join(",")}e.module("betsol.repository",["betsol.networking"]).factory("Repository",["$q","request",function(n,o){return function(n,i){function c(n){var e=i.responseTraverser(n);return i.modelize(e),n}function f(n){var t=i.responseTraverser(n);return e.forEach(t,function(n){i.modelize(n)}),n}var s={modelize:function(){},responseTraverser:function(n){return n}};return i=e.extend({},s,i),n=t(n),{find:function(e,t,r,i){return e=e||{},t>0&&(e.count=t),r>=0&&(e.offset=r),i&&(e.sort=u(i)),o.get(n,e).then(f)},findOneById:function(e,t){return o.get(r(n,e),t).then(c)},create:function(e){return o.post(n,null,e).then(c)},update:function(e,t){return o.put(r(n,e),null,t).then(c)},save:function(n){if(n.id){var e=n.id;return delete n.id,this.update(e,n)}return this.create(n)},"delete":function(e){return o.delete(r(n,e))}}}}])}(window,angular);